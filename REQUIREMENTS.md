# TravelShare - Modul 1: Korisnièki sustav (User Management)

## ?? Funkcionalni zahtjevi sustava (10+)

### FR-UM-01: Registracija korisnika
**Opis:** Korisnik se može registrirati pomoæu emaila, Google raèuna ili studentskog ID-a.  
**Prioritet:** Visok  
**Status:** ?? Planiran (trenutno mockup)

### FR-UM-02: Prijava u sustav
**Opis:** Korisnik se može prijaviti u sustav pomoæu email-a i lozinke.  
**Prioritet:** Visok  
**Status:** ? Implementiran  
**Implementacija:** `AccountController.Login()`

### FR-UM-03: Ureðivanje profila
**Opis:** Korisnik može ureðivati svoj profil (slika, ime, fakultet, broj indeksa, kontakt).  
**Prioritet:** Srednji  
**Status:** ?? UI mockup postoji, funkcionalnost planirana

### FR-UM-04: Pregled profila drugih korisnika
**Opis:** Korisnik može pregledati profil drugih korisnika (javne informacije).  
**Prioritet:** Nizak  
**Status:** ?? Planiran

### FR-UM-05: Reset lozinke
**Opis:** Korisnik može resetirati lozinku putem email linka.  
**Prioritet:** Srednji  
**Status:** ?? UI mockup postoji, funkcionalnost planirana

### FR-UM-06: Administratorske kontrole
**Opis:** Administrator može blokirati ili obrisati korisnika.  
**Prioritet:** Srednji  
**Status:** ?? Planiran  
**Napomena:** Administrator model kreiran, kontrole ostaju za implementaciju

### FR-UM-07: Praæenje aktivnosti
**Opis:** Sustav pamti posljednju prijavu korisnika.  
**Prioritet:** Nizak  
**Status:** ? Implementiran  
**Implementacija:** `UserBase.LastLoginAt`

### FR-UM-08: Postavljanje preferencija putovanja
**Opis:** Korisnik može postaviti preferencije putovanja (budžet, tip destinacija, naèin putovanja).  
**Prioritet:** Srednji  
**Status:** ? Parcijalno implementiran (model i prikaz, ne i edit)  
**Implementacija:** `TravelPreferences` model

### FR-UM-09: Pregled putnih grupa
**Opis:** Korisnik može pregledati svoje putne grupe i povijest putovanja.  
**Prioritet:** Visok  
**Status:** ?? Planiran (ovisno o modulima 2 i 3)

### FR-UM-10: Notifikacijski sustav
**Opis:** Korisnik može primati notifikacije o novim pozivima u putovanja.  
**Prioritet:** Srednji  
**Status:** ?? Planiran

### FR-UM-11: Odjava iz sustava
**Opis:** Korisnik može sigurno se odjaviti iz sustava.  
**Prioritet:** Visok  
**Status:** ? Implementiran  
**Implementacija:** `AccountController.Logout()`

### FR-UM-12: Razlikovanje tipova korisnika
**Opis:** Sustav podržava razlièite tipove korisnika (Student, Administrator) sa specifiènim svojstvima.  
**Prioritet:** Visok  
**Status:** ? Implementiran  
**Implementacija:** Nasljeðivanje `UserBase ? Student, Administrator`

---

## ?? Funkcionalna dekompozicija - Nivo 1 (Moduli)

```
???????????????????????????????????????????????
?          TravelShare Sustav                  ?
???????????????????????????????????????????????
                    ?
        ?????????????????????????????????????????????????????
        ?           ?           ?            ?              ?
???????????????? ?????????? ??????????? ?????????? ???????????????
?  Korisnièki  ? ?Putovanja? ? Troškovi? ? Grupe  ? ? Notifikacije?
?    sustav    ? ? sustav  ? ?  sustav ? ? sustav ? ?   sustav    ?
?  (Modul 1)   ? ?(Modul 2)? ?(Modul 3)? ?(Modul 4? ?  (Modul 5)  ?
???????????????? ??????????? ??????????? ?????????? ???????????????
```

---

## ?? Funkcionalna dekompozicija Modula 1 - Nivo 2

```
???????????????????????????????????????????????????????????????
?              Modul 1: Korisnièki sustav                      ?
???????????????????????????????????????????????????????????????
                              ?
        ?????????????????????????????????????????????
        ?                     ?                     ?
???????????????????  ????????????????????  ??????????????????
?  1.1 Upravljanje?  ? 1.2 Autentifikacija? ? 1.3 Profil     ?
?    raèunima     ?  ?   i autorizacija   ? ?   korisnika    ?
???????????????????  ??????????????????????  ??????????????????
```

---

## ?? Funkcionalna dekompozicija - Nivo 3

### 1.1 Upravljanje raèunima

```
????????????????????????????????????
?   1.1 Upravljanje raèunima       ?
????????????????????????????????????
              ?
    ????????????????????????????????
    ?         ?         ?          ?
????????  ????????  ?????????  ?????????
?1.1.1 ?  ?1.1.2 ?  ?1.1.3  ?  ?1.1.4  ?
?Regis-?  ?Veri- ?  ?Delecija? ?Deakti-?
?tracija? ?fikacija? ?raèuna ?  ?vacija ?
????????  ????????  ?????????  ?????????
```

#### 1.1.1 Registracija korisnika
- Validacija email adrese
- Provjera duplikata
- Kreiranje korisnièkog raèuna
- Spremanje hash-ane lozinke
- Slanje potvrdnog emaila

#### 1.1.2 Verifikacija raèuna
- Email verifikacija link
- Aktivacija raèuna
- Slanje welcome emaila

#### 1.1.3 Delecija raèuna
- Soft delete (deaktivacija)
- Hard delete (permanentno brisanje)
- Arhiviranje podataka

#### 1.1.4 Deaktivacija korisnika (Admin)
- Privremena suspenzija
- Log razloga suspenzije

---

### 1.2 Autentifikacija i autorizacija

```
????????????????????????????????????
? 1.2 Autentifikacija i autorizacija?
????????????????????????????????????
              ?
    ????????????????????????????????
    ?         ?         ?          ?
????????  ????????  ?????????  ?????????
?1.2.1 ?  ?1.2.2 ?  ?1.2.3  ?  ?1.2.4  ?
?Prijava? ?OAuth ?  ?Session?  ?Logout ?
?      ?  ?(ext) ?  ?management? ?      ?
????????  ????????  ?????????  ?????????
```

#### 1.2.1 Prijava korisnika
- Email/Password validacija ?
- Provjera kredencijala ?
- Kreiranje sesije ?
- Logiranje posljednje prijave ?

#### 1.2.2 OAuth autentifikacija
- Google OAuth integration ??
- Microsoft OAuth integration ??
- Mapiranje eksternal ? internal user

#### 1.2.3 Session management
- Spremanje user data u session ?
- Session timeout (30 min) ?
- Session refresh
- Multi-device tracking ??

#### 1.2.4 Odjava korisnika
- Brisanje sesije ?
- Invalidacija tokena
- Redirect na landing page ?

---

### 1.3 Profil korisnika

```
????????????????????????????????????
?      1.3 Profil korisnika         ?
????????????????????????????????????
              ?
    ????????????????????????????????
    ?         ?         ?          ?
????????  ????????  ?????????  ?????????
?1.3.1 ?  ?1.3.2 ?  ?1.3.3  ?  ?1.3.4  ?
?Pregled? ?Ureði-?  ?Travel ?  ?Sigur- ?
?profila? ?vanje ?  ?preferen.? ?nost   ?
????????  ????????  ?????????  ?????????
```

#### 1.3.1 Pregled profila
- Prikaz osnovnih info ?
- Prikaz student-specifiènih info ?
- Prikaz admin-specifiènih info ?
- Prikaz travel preferencija ?
- Statistike aktivnosti ?

#### 1.3.2 Ureðivanje profila
- Upload profilne slike ??
- Ureðivanje osnovnih podataka ??
- Ureðivanje kontakt informacija ??
- Validacija unosa ??

#### 1.3.3 Travel preferencije
- Postavljanje budžeta ? (model)
- Odabir tipa putovanja ? (model)
- Odabir smještaja ? (model)
- Odabir destinacija ? (model)
- Spremanje preferencija ?? (edit)

#### 1.3.4 Sigurnost i privatnost
- Promjena lozinke ??
- Reset lozinke (forgot password) ??
- Privatnost profila (public/private) ??
- Export osobnih podataka (GDPR) ??

---

## ?? Nefunkcionalni zahtjevi

### NFR-UM-01: Performance
**Zahtjev:** Modul mora omoguæiti autentifikaciju unutar 2 sekunde.  
**Implementacija:**
- ? Async/await pattern za non-blocking operacije
- ? In-memory session storage (brz pristup)
- ?? Caching korisnièkih podataka
- ?? Database indexing na email i ID

**Testiranje:**
```csharp
// Prosjeèno vrijeme login-a: < 500ms (mock)
// Cilj za produkciju: < 2000ms
```

### NFR-UM-02: Sigurnost
**Zahtjev:** Zaštita korisnièkih podataka (enkripcija lozinki, HTTPS).  
**Implementacija:**
- ? HTTPS enabled (Program.cs)
- ? Anti-forgery tokens na POST akcijama
- ?? Password hashing (trenutno plaintext u mocku)
- ? Session-based authentication
- ?? SQL injection prevention (parametrizacija)
- ?? XSS protection (Razor encoding)

**Za produkciju:**
```csharp
// ASP.NET Core Identity za password hashing
// Data encryption at rest
// Rate limiting za login attempts
// CAPTCHA za brute-force zaštitu
```

### NFR-UM-03: Skalabilnost
**Zahtjev:** Sustav mora podržavati minimum 1000 konkurentnih korisnika.  
**Implementacija:** ??
- Distributed session storage (Redis)
- Load balancing
- Database connection pooling
- Horizontal scaling

### NFR-UM-04: Usability
**Zahtjev:** Intuitivno i responzivno korisnièko suèelje.  
**Implementacija:**
- ? Bootstrap 5 responsive design
- ? Bootstrap Icons
- ? Jasne error poruke
- ? Validation feedback
- ? Mobile-friendly navigation

### NFR-UM-05: Maintainability
**Zahtjev:** Clean code, dokumentacija, testabilnost.  
**Implementacija:**
- ? SOLID principi
- ? Dependency Injection
- ? XML dokumentacijski komentari
- ? Interface-based design
- ? Jasna struktura projekta
- ?? Unit testovi
- ?? Integration testovi

---

## ?? Metrike uspješnosti modula

| Metrika                    | Cilj        | Trenutno Status |
|----------------------------|-------------|-----------------|
| Vrijeme login-a            | < 2s        | ? < 0.5s       |
| Uspješnost autentifikacije | > 99%       | ? 100% (mock)  |
| Dostupnost sustava         | 99.9%       | ?? N/A          |
| Sigurnosni incidenti       | 0           | ? 0            |
| User satisfaction          | > 4.5/5     | ?? N/A          |

---

## ?? Testni scenariji

### TS-01: Uspješna prijava
```
Given: Korisnik ima validan raèun
When: Unese ispravan email i lozinku
Then: Biti preusmjeren na dashboard
And: Vidjeti personalizirani sadržaj
```

### TS-02: Neuspješna prijava - krivi kredencijali
```
Given: Korisnik unese nepostojeæi email
When: Pritisne "Prijavi se"
Then: Vidjeti poruku "Pogrešan email ili lozinka"
And: Ostati na login stranici
```

### TS-03: Pregled student profila
```
Given: Student je prijavljen
When: Klikne na "Moj profil"
Then: Vidjeti:
  - Osnovne info (ime, email)
  - Studentske info (broj indeksa, fakultet)
  - Travel preferencije
  - Statistike (0 putovanja)
```

### TS-04: Pregled admin profila
```
Given: Administrator je prijavljen
When: Klikne na "Moj profil"
Then: Vidjeti:
  - Osnovne info (ime, email)
  - Odjel
  - Dozvole (ManageUsers, ViewReports, ManageTrips)
```

### TS-05: Session expiration
```
Given: Korisnik je prijavljen
When: Proðe 30 minuta bez aktivnosti
Then: Session istekne
And: Korisnik biti preusmjeren na login
```

---

**Legenda:**
- ? = Implementiran
- ?? = Planiran
- ?? = Parcijalno implementiran

**Napomena:** Ova verzija je **mockup** za potrebe projektnog zadatka. Za produkcijsku verziju potrebno je implementirati sve ?? i ?? stavke.
