# TravelShare - User Management Module - Dijagrami

## ?? Use Case Dijagram

```
???????????????????????????????????????????????????????????????????
?                   TravelShare - User Management                  ?
???????????????????????????????????????????????????????????????????

    Gost                          Student                    Administrator
     ?                              ?                              ?
     ?                              ?                              ?
     ???(Pregled landing stranice) ?                              ?
     ?                              ?                              ?
     ???(Registracija) ????????????????????????????????????????????
     ?                              ?                              ?
     ???(Prijava)????????????????????                              ?
     ?                              ?                              ?
                                    ???(Odjava)                    ?
                                    ?                              ?
                                    ???(Pregled profila)           ?
                                    ?                              ?
                                    ???(Ureðivanje profila)        ?
                                    ?                              ?
                                    ???(Postavljanje preferencija) ?
                                    ?                              ?
                                    ???(Reset lozinke)             ?
                                    ?                              ?
                                    ?                              ???(Blokiranje korisnika)
                                    ?                              ?
                                    ?                              ???(Brisanje korisnika)
                                    ?                              ?
                                    ?                              ???(Pregled svih korisnika)
```

## ?? Detaljni Use Case Opisi

### Use Case 1: Prijava u sustav (Login)

**ID:** UC-UM-001  
**Naziv:** Prijava u sustav  
**Akter:** Student, Administrator  
**Preduvjet:** Korisnik ima validan raèun u sustavu  
**Glavni tok (Main Flow):**

1. Korisnik otvara stranicu za prijavu
2. Sustav prikazuje formu za prijavu (email, lozinka)
3. Korisnik unosi email i lozinku
4. Korisnik klikne "Prijavi se"
5. Sustav validira kredencijale
6. Sustav kreira sesiju i sprema korisnièke podatke
7. Sustav ažurira vrijeme posljednje prijave
8. Sustav preusmjerava korisnika na poèetnu stranicu
9. Sustav prikazuje personalizirani sadržaj

**Alternativni tokovi:**

**A1: Pogrešni kredencijali (Korak 5)**
- 5a. Sustav detektira nevalidne kredencijale
- 5b. Sustav prikazuje poruku greške "Pogrešan email ili lozinka"
- 5c. Vraæa se na korak 2

**A2: Prazan email ili lozinka (Korak 3)**
- 3a. Korisnik ostavlja polje prazno
- 3b. Sustav prikazuje validacijsku poruku
- 3c. Vraæa se na korak 2

**A3: Neaktivan korisnièki raèun (Korak 5)**
- 5a. Sustav detektira da je raèun deaktiviran
- 5b. Sustav prikazuje "Vaš raèun je blokiran. Kontaktirajte administratora."
- 5c. Use case završava

**Postuvjet:** Korisnik je prijavljen i može pristupiti zaštiæenim funkcijama

---

### Use Case 2: Pregled korisnièkog profila

**ID:** UC-UM-002  
**Naziv:** Pregled korisnièkog profila  
**Akter:** Student, Administrator  
**Preduvjet:** Korisnik je prijavljen u sustav  
**Glavni tok (Main Flow):**

1. Korisnik klikne na svoj avatar u navigacijskoj traci
2. Korisnik odabere "Moj profil" iz dropdown menija
3. Sustav dohvaæa korisnièke podatke iz sesije
4. Sustav prikazuje stranicu profila sa:
   - Osnovnim informacijama (ime, email, fakultet)
   - Profilnom slikom
   - Datumom kreiranja raèuna
   - Vremenom posljednje prijave
5. **[Ako je Student]** Sustav prikazuje:
   - Broj indeksa
   - Sveuèilište i fakultet
   - Kontakt telefon
   - Travel preferencije (budget, tip putovanja, destinacije)
   - Statistike (0 putovanja, 0 grupa)
6. **[Ako je Administrator]** Sustav prikazuje:
   - Odjel
   - Dozvole

**Alternativni tokovi:**

**A1: Korisnik nije prijavljen (Korak 1)**
- 1a. Sustav detektira da nema aktivne sesije
- 1b. Sustav preusmjerava na stranicu za prijavu
- 1c. Use case završava

**A2: Sesija je istekla (Korak 3)**
- 3a. Sustav ne može dohvatiti podatke
- 3b. Sustav prikazuje poruku "Vaša sesija je istekla"
- 3c. Sustav preusmjerava na prijavu
- 3d. Use case završava

**Postuvjet:** Korisnik vidi svoje informacije na profilu

---

### Use Case 3: Postavljanje travel preferencija

**ID:** UC-UM-003  
**Naziv:** Postavljanje travel preferencija  
**Akter:** Student  
**Preduvjet:** Korisnik je prijavljen kao Student  
**Glavni tok (Main Flow):**

1. Student otvara svoj profil
2. Student klikne na "Uredi profil"
3. Sustav prikazuje formu za ureðivanje
4. Student odabire tab "Preferencije putovanja"
5. Student postavlja:
   - Minimalni i maksimalni budžet (€)
   - Tip putovanja (Adventure, Cultural, Beach, etc.)
   - Preferiranu vrstu smještaja (Hostel, Hotel, Apartment)
   - Preferirane destinacije (multiple select)
6. Student klikne "Spremi promjene"
7. Sustav validira unos (budžet > 0, min < max)
8. Sustav sprema preferencije
9. Sustav prikazuje poruku "Preferencije uspješno ažurirane"
10. Sustav vraæa korisnika na profil

**Alternativni tokovi:**

**A1: Minimalni budžet veæi od maksimalnog (Korak 7)**
- 7a. Sustav detektira grešku u validaciji
- 7b. Sustav prikazuje "Minimalni budžet mora biti manji od maksimalnog"
- 7c. Vraæa se na korak 4

**A2: Negativan budžet (Korak 7)**
- 7a. Sustav detektira negativnu vrijednost
- 7b. Sustav prikazuje "Budžet mora biti veæi od 0"
- 7c. Vraæa se na korak 4

**A3: Administrator pokušava pristupiti (Korak 1)**
- 1a. Sustav detektira da korisnik nije Student
- 1b. Sustav ne prikazuje opciju za travel preferencije
- 1c. Use case završava

**A4: Nisu odabrane destinacije (Korak 7)**
- 7a. Sustav prihvaæa prazan popis
- 7b. Korisnik može kasnije dodati destinacije
- 7c. Nastavlja na korak 8

**Postuvjet:** Student ima postavljene preferencije koje sustav može koristiti za preporuke putovanja

---

## ?? Class Diagram - User Management

```
???????????????????????????????????????????
?         <<abstract>>                     ?
?           UserBase                       ?
???????????????????????????????????????????
? + Id: int                                ?
? + Email: string                          ?
? + FirstName: string                      ?
? + LastName: string                       ?
? + ProfileImageUrl: string?               ?
? + CreatedAt: DateTime                    ?
? + LastLoginAt: DateTime?                 ?
? + IsActive: bool                         ?
???????????????????????????????????????????
? + GetDisplayName(): string               ?
? + GetUserType(): string {abstract}       ?
? + GetUserDescription(): string           ?
???????????????????????????????????????????
            ?                 ?
            ?                 ?
    ?????????????????   ?????????????????
    ?               ?   ?                ?
    ?   Student     ?   ? Administrator  ?
    ?????????????????   ??????????????????
    ? + StudentId   ?   ? + Department   ?
    ? + University  ?   ? + Permissions  ?
    ? + Faculty     ?   ?                ?
    ? + PhoneNumber ?   ??????????????????
    ? + Preferences ?
    ?????????????????
          ?
          ? has
          ?
    ???????????????????
    ? TravelPreferences?
    ???????????????????
    ? + MaxBudget     ?
    ? + MinBudget     ?
    ? + Destinations  ?
    ? + TravelType    ?
    ???????????????????


?????????????????????????????????????????????
?      <<interface>>                         ?
?    IAuthenticationService                  ?
?????????????????????????????????????????????
? + AuthenticateAsync()                      ?
? + RegisterUserAsync()                      ?
? + Logout()                                 ?
?????????????????????????????????????????????
                ?
                ? implements
                ?
    ???????????????????????????
    ? MockAuthenticationService?
    ???????????????????????????
    ? - _providers            ?
    ? - _currentUser          ?
    ???????????????????????????
                ? uses
                ?
    ??????????????????????????
    ? <<abstract>>           ?
    ? AuthenticationProvider ?
    ??????????????????????????
    ? + ProviderName         ?
    ??????????????????????????
    ? + AuthenticateAsync()  ?
    ??????????????????????????
                ?
                ? inherits
                ?
    ????????????????????????????
    ?EmailAuthenticationProvider?
    ?????????????????????????????
```

## ?? Sequence Diagram - Login Process

```
Student    LoginPage    AccountController    AuthService    EmailProvider    Session
   ?            ?              ?                  ?               ?            ?
   ?  Visits    ?              ?                  ?               ?            ?
   ???????????> ?              ?                  ?               ?            ?
   ?            ?              ?                  ?               ?            ?
   ?  Submits   ?              ?                  ?               ?            ?
   ?  (email,   ?              ?                  ?               ?            ?
   ?  password) ?              ?                  ?               ?            ?
   ???????????????????????????>?                  ?               ?            ?
   ?            ?              ?  Authenticate    ?               ?            ?
   ?            ?              ??????????????????>?               ?            ?
   ?            ?              ?                  ?  Validate     ?            ?
   ?            ?              ?                  ???????????????>?            ?
   ?            ?              ?                  ?               ?            ?
   ?            ?              ?                  ?  Get User     ?            ?
   ?            ?              ?                  ???????????????>?            ?
   ?            ?              ?                  ?  UserBase     ?            ?
   ?            ?              ?                  ?<???????????????            ?
   ?            ?              ?  Result(Success) ?               ?            ?
   ?            ?              ?<??????????????????               ?            ?
   ?            ?              ?                  ?               ?            ?
   ?            ?              ?  Store User      ?               ?            ?
   ?            ?              ??????????????????????????????????????????????> ?
   ?            ?              ?                  ?               ?   Stored   ?
   ?            ?              ?                  ?               ?<??????????? ?
   ?            ?  Redirect    ?                  ?               ?            ?
   ?<???????????????????????????                  ?               ?            ?
   ?            ?              ?                  ?               ?            ?
   ?  Show      ?              ?                  ?               ?            ?
   ?  Dashboard ?              ?                  ?               ?            ?
   ?<????????????              ?                  ?               ?            ?
```

## ?? Component Diagram

```
???????????????????????????????????????????????????????????????
?                    Presentation Layer                        ?
?  ??????????????????  ??????????????????  ???????????????????
?  ? HomeController ?  ?AccountController?  ?  Views (Razor) ??
?  ??????????????????  ??????????????????  ???????????????????
???????????????????????????????????????????????????????????????
                            ? uses
???????????????????????????????????????????????????????????????
?                    Business Logic Layer                      ?
?  ????????????????????????  ??????????????????????????????  ?
?  ?IAuthenticationService?  ?     IUserService           ?  ?
?  ????????????????????????  ??????????????????????????????  ?
?           ?                          ?                       ?
?           ? implements               ? implements            ?
?  ?????????????????????      ??????????????????             ?
?  ? MockAuthService   ?      ? MockUserService ?             ?
?  ?????????????????????      ??????????????????             ?
???????????????????????????????????????????????????????????????
                            ? uses
???????????????????????????????????????????????????????????????
?                      Domain Models Layer                     ?
?  ??????????????  ????????????  ????????????????           ?
?  ?  UserBase  ?  ?  Student ?  ? Administrator?            ?
?  ??????????????  ????????????  ????????????????            ?
?                                                              ?
?  ????????????????????????  ???????????????????????         ?
?  ?AuthenticationProvider?  ? AuthenticationResult?         ?
?  ????????????????????????  ???????????????????????         ?
????????????????????????????????????????????????????????????????
```

## ??? Deployment Diagram (Mockup verzija)

```
???????????????????????????????????????????????????
?              Client Browser                      ?
?  ??????????????  ?????????????                 ?
?  ?   HTML     ?  ?    CSS    ?                  ?
?  ? JavaScript ?  ? Bootstrap ?                  ?
?  ??????????????  ?????????????                  ?
???????????????????????????????????????????????????
                        ? HTTPS
                        ?
???????????????????????????????????????????????????
?         ASP.NET Core Web Server (Kestrel)       ?
?  ???????????????????????????????????????????   ?
?  ?          MVC Application                 ?   ?
?  ?  ?????????????  ???????????????????    ?   ?
?  ?  ?Controllers?  ? Services (Mock) ?    ?   ?
?  ?  ?????????????  ???????????????????    ?   ?
?  ?  ?????????????  ???????????????????    ?   ?
?  ?  ?  Models   ?  ?     Views       ?    ?   ?
?  ?  ?????????????  ???????????????????    ?   ?
?  ???????????????????????????????????????????   ?
?                                                  ?
?  ???????????????????????????????????????????   ?
?  ?      Session Storage (In-Memory)        ?   ?
?  ?  - CurrentUser (JSON)                   ?   ?
?  ?  - UserType                             ?   ?
?  ???????????????????????????????????????????   ?
???????????????????????????????????????????????????

Note: Za produkciju dodati:
- Database (SQL Server / PostgreSQL)
- Redis za session storage
- Load balancer
- Authentication server (IdentityServer)
```

---

**Verzija dokumentacije:** 1.0  
**Datum:** 2024  
**Status:** Mockup implementacija - User Management Module
